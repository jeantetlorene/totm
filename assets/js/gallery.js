!function(e){e(".gallery").wrapInner('<div class="inner"></div>').prepend(browser.mobile?"":'<div class="forward"></div><div class="backward"></div>').scrollex({top:"30vh",bottom:"30vh",delay:50,initialize:function(){e(this).addClass("is-inactive")},terminate:function(){e(this).removeClass("is-inactive")},enter:function(){e(this).removeClass("is-inactive")},leave:function(){var i=e(this);i.hasClass("onscroll-bidirectional")&&i.addClass("is-inactive")}}).children(".inner").css("overflow-y",browser.mobile?"visible":"hidden").css("overflow-x",browser.mobile?"scroll":"hidden").scrollLeft(0),e(".gallery").on("wheel",".inner",(function(i){var l=e(this),s=10*i.originalEvent.deltaX;s>0?s=Math.min(25,s):s<0&&(s=Math.max(-25,s)),l.scrollLeft(l.scrollLeft()+s)})).on("mouseenter",".forward, .backward",(function(){var i=e(this),l=i.siblings(".inner"),s=i.hasClass("forward")?1:-1;clearInterval(this._gallery_moveIntervalId),this._gallery_moveIntervalId=setInterval((function(){l.scrollLeft(l.scrollLeft()+5*s)}),10)})).on("mouseleave",".forward, .backward",(function(){clearInterval(this._gallery_moveIntervalId)})),e(".gallery.lightbox").on("click","a",(function(i){var l=e(this),s=l.parents(".gallery").children(".modal"),a=s.find("img"),n=l.attr("href");n.match(/\.(jpg|gif|png|mp4)$/)&&(i.preventDefault(),i.stopPropagation(),s[0]._locked||(s[0]._locked=!0,a.attr("src",n),s.addClass("visible"),s.focus(),setTimeout((function(){s[0]._locked=!1}),600)))})).on("click",".modal",(function(){var i=e(this),l=i.find("img");i[0]._locked||i.hasClass("visible")&&(i[0]._locked=!0,i.removeClass("loaded"),setTimeout((function(){i.removeClass("visible"),setTimeout((function(){l.attr("src",""),i[0]._locked=!1,$body.focus()}),475)}),125))})).on("keypress",".modal",(function(i){var l=e(this);27==i.keyCode&&l.trigger("click")})).prepend('<div class="modal" tabIndex="-1"><div class="inner"><img src="" /></div></div>').find("img").on("load",(function(){var i=e(this).parents(".modal");setTimeout((function(){i.hasClass("visible")&&i.addClass("loaded")}),275)}))}(jQuery);